#!/bin/bash
#“#SBATCH” directives that convey submission options:
##### The name of the job
#SBATCH --job-name=bert2gpt2
##### When to send e-mail: pick from NONE, BEGIN, END, FAIL, REQUEUE, ALL
#SBATCH --mail-type=BEGIN,END,FAIL
##### Resources for your job
# number of physical nodes
#SBATCH --nodes=1
# number of task per a node (number of CPU-cores per a node)
#SBATCH --partition=gpu
#SBATCH --gpus=1
#SBATCH --mem-per-gpu=64000m
#SBATCH --cpus-per-gpu=4
# memory per a CPU-core
##### Maximum amount of time the job will be allowed to run
##### Recommended formats: MM:SS, HH:MM:SS, DD-HH:MM
#SBATCH --time=04:00:00
##### The resource account; who pays
#SBATCH --account=vgvinodv0
########## End of preamble! #########################################
# No need to “cd”. Slurm starts the job in the submission directory.
#####################################################################
# The application(s) to execute along with its input arguments and options:
my_job_header

/bin/hostname
module purge

module load python/3.10.4
module load pytorch

!pip install datasets tokenizers==0.9.4 transformers==4.2.1 rouge_score

python3 train_bert2gpt2.py